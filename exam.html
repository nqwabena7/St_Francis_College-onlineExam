<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>University Online Examination</title>

<style>
:root {
  --primary:#002147;
  --accent:#28a745;
  --card:#eef3ff;
  --danger:#dc3545;
}
body { font-family: "Segoe UI", Arial, sans-serif; background: linear-gradient(135deg,#e9eef5,#f8fafc); margin: 0; }
.exam-container { max-width: 900px; margin: 40px auto; background: #fff; border-radius: 16px; box-shadow: 0 20px 40px rgba(0,0,0,0.15); padding: 35px; }
.header { text-align: center; border-bottom: 1px solid #eee; padding-bottom: 15px; }
.header h1 { margin: 0; color: var(--primary); }
.welcome { margin-top: 10px; font-weight: 600; color: var(--accent); }
.instructions { color: #555; margin-top: 10px; font-size: 14px; }
.question-wrapper { display: flex; justify-content: center; margin-top: 35px; }
.question-box { background: var(--card); padding: 35px; border-radius: 16px; width: 100%; max-width: 650px; min-height: 240px; }
.question-count { font-size: 14px; font-weight: 600; color: var(--primary); margin-bottom: 15px; }
#questionText { font-size: 18px; margin-bottom: 25px; }
.options label { display: block; padding: 14px 16px; margin: 12px 0; background: #fff; border-radius: 10px; border: 1px solid #ccc; cursor: pointer; }
.options input { margin-right: 10px; }
.nav-buttons { display: flex; justify-content: space-between; margin-top: 30px; }
button { padding: 12px 28px; border: none; border-radius: 10px; cursor: pointer; font-size: 15px; }
.prev { background:#6c757d; color:#fff; }
.next { background:var(--primary); color:#fff; }
.submit { background: var(--accent); color: #fff; width: 100%; margin-top: 30px; font-size: 16px; display: none; }
.logout { background: #dc3545; margin-top: 15px; }
.warning { text-align: center; color: var(--danger); margin-top: 15px; font-weight: 600; }
</style>
</head>
<body>

<div class="exam-container">
  <div class="header">
    <h1>University Online Examination</h1>
    <div class="welcome" id="welcomeUser"></div>
    <p class="instructions">Do not refresh or switch tabs. Three violations will auto-submit your exam.</p>
  </div>

  <div class="question-wrapper">
    <div class="question-box">
      <div class="question-count" id="questionCount"></div>
      <div id="questionText"></div>
      <div class="options" id="options"></div>
    </div>
  </div>

  <div class="nav-buttons">
    <button class="prev" onclick="prevQuestion()">Previous</button>
    <button class="next" onclick="nextQuestion()">Next</button>
  </div>

  <button class="submit" id="submitBtn" onclick="submitExam()">Submit Examination</button>
  <button class="logout" onclick="logout()">Logout</button>
  <p class="warning" id="warningText"></p>
</div>

<script>
// ===== ELEMENTS =====
const options = document.getElementById("options");
const questionCount = document.getElementById("questionCount");
const questionText = document.getElementById("questionText");
const warningText = document.getElementById("warningText");
const welcomeUser = document.getElementById("welcomeUser");
const submitBtn = document.getElementById("submitBtn");

// ===== LOGIN CHECK =====
window.onload = () => {
  const username = localStorage.getItem("exam_username");
  if(!username){
    alert("Please login first.");
    location.href = "login.html";
  } else {
    welcomeUser.innerText = `Welcome, ${username}`;
  }
};

// ================= PHASE 1 =================
const phase1 = [
  {q:"Which statement is not completely true about education?",o:["An illiterate cannot be said to be educated.","Education involves acquiring knowledge.","Education is lifelong.","Education is simply socialization."],c:"Education is simply socialization."},
  {q:"Education that trains emotions and social behaviour relates to?",o:["Affective","Cognitive","Emotive","Psychomotor"],c:"Affective"},
  {q:"Learning that takes place at any learning site is?",o:["Formal","Informal","Liberal","Non-formal"],c:"Informal"},
  {q:"Critical thinking belongs to which domain?",o:["Affective","Cognitive","Psychomotor","Thinking"],c:"Cognitive"},
  {q:"Which cannot be regarded as a trait of liberal education?",o:["Acquisition of manipulative skills","Critical thinking","Emotional intelligence","Reflection"],c:"Acquisition of manipulative skills"},
  {q:"Education that equips individuals with economic skills is?",o:["Formal","Informal","Liberal","Vocational"],c:"Vocational"},
  {q:"Using counters to teach mathematics applies?",o:["Concrete to abstract","Deductive to inductive","Known to unknown","Simple to complex"],c:"Concrete to abstract"},
  {q:"Linking lessons to learners’ experiences follows?",o:["Concrete to abstract","Easy to difficult","Known to unknown","Simple to complex"],c:"Known to unknown"},
  {q:"Awarding certificates relates to which function?",o:["Certification","Economic","Political","Selection"],c:"Certification"},
  {q:"Teaching as an art suggests?",o:["Teachers are made","Teachers are not born","Teaching involves intuition","Teaching requires training"],c:"Teaching involves intuition"},
  {q:"Andragogy should be adopted at?",o:["Basic","Kindergarten","Secondary","Tertiary"],c:"Tertiary"},
  {q:"Micro-teaching helps to?",o:["Develop specific teaching competencies","Full lessons","Off-campus teaching","Only practicing teachers"],c:"Develop specific teaching competencies"},
  {q:"Checking if lesson objectives were achieved is?",o:["Assessment teaching","Lesson evaluation","Reflective teaching","Team teaching"],c:"Lesson evaluation"},
  {q:"Responsive Classroom approach focuses on?",o:["Self-paced","Independent","Academic & social skills","Safe, joyful classrooms"],c:"Safe, joyful classrooms"},
  {q:"Foremost agency for child education is?",o:["Church","Community","Home","School"],c:"Home"},
  {q:"Which agency of socialization is non-personal?",o:["Home","Mass media","Peer group","School"],c:"Mass media"},
  {q:"Academic or grammar education is?",o:["Formal","Liberal","Non-formal","Vocational"],c:"Liberal"},
  {q:"A challenge of child-centred education is?",o:["Cheap","Not feasible","Time consuming","Undermines discipline"],c:"Time consuming"},
  {q:"Andragogy assumes motivation becomes intrinsic.",o:["False","True"],c:"True"},
  {q:"Teacher dictates everything in child-centred education.",o:["False","True"],c:"False"}
];

// ================= PHASE 2 =================
const phase2 = [
  {q:"Speech sounds could be vowels or consonants.",o:["True","False"],c:"True"},
  {q:"IPA symbols are not universal.",o:["True","False"],c:"False"},
  {q:"Airstream mechanism is not mandatory.",o:["True","False"],c:"False"},
  {q:"Vowels are described by three criteria.",o:["True","False"],c:"True"},
  {q:"Central to human interaction is?",o:["Communication","Language","Culture","Speech"],c:"Communication"},
  {q:"Sounds of language are produced by?",o:["Speech organs","Brain","Lungs","Tongue"],c:"Speech organs"},
  {q:"Three components of speech production?",o:["Initiation, Phonation, Articulation","Air, Voice, Sound","Speech, Talk, Hear","Tongue, Teeth, Lips"],c:"Initiation, Phonation, Articulation"},
  {q:"Organ housing vocal folds?",o:["Larynx","Pharynx","Tongue","Nasal cavity"],c:"Larynx"},
  {q:"Lower part of roof of mouth?",o:["Soft palate","Hard palate","Uvula","Ridge"],c:"Soft palate"},
  {q:"Two lips touching produces?",o:["Bilabial","Dental","Alveolar","Velar"],c:"Bilabial"},
  {q:"Lower lip to upper teeth?",o:["Labio-dental","Bilabial","Dental","Glottal"],c:"Labio-dental"},
  {q:"Non-vibrating vocal folds produce?",o:["Voiceless","Voiced","Breathy","Nasal"],c:"Voiceless"},
  {q:"Vocal folds positions?",o:["Three","Two","Four","Five"],c:"Three"},
  {q:"Jaw is also called?",o:["Mandible","Maxilla","Palate","Alveolus"],c:"Mandible"},
  {q:"Speech sounds classified by?",o:["Place & manner","Meaning","Tone","Stress"],c:"Place & manner"},
  {q:"Only lateral sound?",o:["/l/","/r/","/n/","/j/"],c:"/l/"},
  {q:"Same spelling & sound, different meaning?",o:["Homonyms","Synonyms","Antonyms","Hyponyms"],c:"Homonyms"},
  {q:"Single vowel sound?",o:["Monophthong","Diphthong","Triphthong","Glide"],c:"Monophthong"},
  {q:"Types of diphthongs?",o:["Closing & centring","Short & long","Open & close","Front & back"],c:"Closing & centring"},
  {q:"Writing starts & ends same topic?",o:["Unity","Coherence","Clarity","Emphasis"],c:"Unity"}
];

// ================= ENGINE =================
let phase = 1;
let questions = phase1;
let current = 0;
let answers = {};

function loadQuestion(){
  const q = questions[current];
  questionCount.innerText = `Phase ${phase} — Question ${current+1} of ${questions.length}`;
  questionText.innerHTML = `<strong>${q.q}</strong>`;
  options.innerHTML = q.o.map(opt => `
    <label>
      <input type="radio" name="opt" value="${opt}" ${answers[`${phase}-${current}`]===opt?"checked":""}>
      ${opt}
    </label>
  `).join("");

  submitBtn.style.display = (phase === 2 && current === questions.length-1) ? "block" : "none";
}

options.addEventListener("change", e => {
  answers[`${phase}-${current}`] = e.target.value;
});

function allAnswered(arr, ph){
  return arr.every((_,i)=>answers[`${ph}-${i}`]);
}

function nextQuestion(){
  if(current < questions.length-1){
    current++;
    loadQuestion();
  } else if(phase === 1){
    if(!allAnswered(phase1,1)){
      alert("⚠️ You must answer ALL Phase 1 questions before proceeding.");
      return;
    }
    phase = 2;
    questions = phase2;
    current = 0;
    alert("Phase 2 (Language & Linguistics) unlocked.");
    loadQuestion();
  }
}

function prevQuestion(){
  if(current > 0){ current--; loadQuestion(); }
}

loadQuestion();

// ================= SUBMIT =================
function submitExam(){
  let p1 = 0, p2 = 0;
  phase1.forEach((q,i)=>{ if(answers[`1-${i}`]===q.c) p1++; });
  phase2.forEach((q,i)=>{ if(answers[`2-${i}`]===q.c) p2++; });

  const total = phase1.length + phase2.length;
  const score = p1 + p2;
  const percent = Math.round((score/total)*100);

  const result = {
    name: localStorage.getItem("exam_username"),
    phase1:{score:p1,total:phase1.length},
    phase2:{score:p2,total:phase2.length},
    score,total,percent,grade:getGrade(percent),
    date:new Date().toLocaleString()
  };

  localStorage.setItem("latest_result", JSON.stringify(result));
  location.href = "result.html";
}

function getGrade(p){
  if(p>=80) return "A";
  if(p>=70) return "B";
  if(p>=60) return "C";
  if(p>=50) return "D";
  return "F";
}
</script>

</body>
</html>
